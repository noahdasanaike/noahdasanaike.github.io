<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOV2020 Master Document</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .week-item {
            margin-bottom: 10px;
            background-color: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .week-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        .week-title {
            font-weight: bold;
        }
        .cas-buttons {
            display: flex;
            gap: 5px;
        }
        .cas-button {
            padding: 3px 7px;
            border: 1px solid #ccc;
            background-color: #f8f9fa;
            cursor: pointer;
            border-radius: 4px;
        }
        .cas-button:hover {
            background-color: #e9ecef;
        }
        .cas-button.active {
            background-color: #007bff;
            color: white;
        }
        .document-viewers {
            display: flex;
            gap: 2px;
            margin-top: 5px;
        }
        .document-viewer {
            flex: 1;
            height: 300px;
            border: none;
        }
    </style>
</head>
<body>
    <center><h1>GOV2020: Master Document</h1><h3>Fall 2024</h3></center>
    <div id="weeklyStructure"></div>

    <script>
        const casDocuments = {
            C: "1heBKyy-nu6_WK4Uz4NFy4rriDQGSuaC3AhrIuZfqwVc",
            A: "1ffWPTNhPOIagU4VAxaKH2-FlKI7sJ1tNbAsoMxNyof4",
            S: "1oHBXw_rMKyRxaIOOK5qAyPnfYsvm6z_kIia91kfKr1U",
        };

        const casLabels = {
            C: "Course Notes",
            A: "Assignments",
            S: "Section Notes"
        };

        const weekData = [
            {
                title: "Publication",
                bookmarks: {
                    C: "id.adpabqwv7zv7",
                    A: "id.oxnozjboaixo",
                    S: "id.s2zja9h32nyv"
                }
            },
            {
                title: "What's the Big Idea?",
                bookmarks: {
                    C: "id.ivc6kqodc3t1",
                    A: "id.qzb593mtzlc8",
                    S: "id.i2n4mamhd4ps"
                }
            },
            {
                title: "Getting (& presenting) defensible answers",
                bookmarks: {
                    C: "id.foj3yecpgns",
                    A: "id.vxoc8hxau355",
                    S: "id.oeiyxshoui8x"
                }
            },
            {
                title: "Research Strategy",
                bookmarks: {
                    C: "id.vtpopho3wx3u",
                    A: "id.k7jwxd5hrznc",
                    S: "id.asx9lztz7p1i"
                }
            },
            {
                title: "Changing the Question",
                bookmarks: {
                    C: "id.c17o4gf13ewq",
                    A: "id.qicytri2ahrh",
                    S: "id.umlfhl1nc674"
                }
            },
            {
                title: "The Big Picture",
                bookmarks: {
                    C: "id.jx3ve7u62f7h",
                    A: "id.tt30yz1iiuso",
                    S: "id.ddi2p3tky2eb"
                }
            },
            {
                title: "Graphics Impact Day",
                bookmarks: {
                    C: "id.189fmnj5obl4",
                    A: "id.tmgynyyr005l",
                    S: "id.prjj9a7mjikq"
                }
            },
            {
                title: "An Interlude for Science",
                bookmarks: {
                    C: "id.45i7iys9pmgk",
                    A: "id.tek1ara91kx",
                    S: "id.f4ao7enb97jf"
                }
            },
            {
                title: "The long view; whatâ€™s grad school all about?",
                bookmarks: {
                    C: "id.rjfzhl93mrbz",
                    A: "id.ry0exmrzy0an",
                    S: "id.r6zlmssoy2zx"
                }
            },
            {
                title: "Presentations: how to",
                bookmarks: {
                    C: "id.ftdde1vpxfn7",
                    A: "id.zdpz824z08vj",
                    S: "id.s2eg6z12z2az"
                }
            },
            {
                title: "Presentations",
                bookmarks: {
                    C: "id.pu6f7q1oddy4",
                    A: "id.db7ypagin2j"
                }
            },
            {
                title: "Final Help",
                bookmarks: {
                    C: "id.51x0dfbdv161",
                    A: "id.a3h0f4jb8xv9"
                }
            },
        ];

        function createWeekStructure() {
            const container = document.getElementById('weeklyStructure');
            weekData.forEach((week, index) => {
                const weekItem = document.createElement('div');
                weekItem.className = 'week-item';
                
                let buttons = `
                    <button class="cas-button show-all" onclick="toggleAllDocuments(${index})">Show All</button>
                `;

                for (const docType in casDocuments) {
                    if (week.bookmarks[docType]) {
                        buttons += `<button class="cas-button" onclick="toggleDocument('${docType}', ${index})">${casLabels[docType]}</button>`;
                    }
                }

                weekItem.innerHTML = `
                    <div class="week-header">
                        <div class="week-title">Week ${index + 1}: ${week.title}</div>
                        <div class="cas-buttons">
                            ${buttons}
                        </div>
                    </div>
                    <div class="document-viewers" id="viewers-${index}"></div>
                `;

                container.appendChild(weekItem);
            });
        }

        function toggleDocument(docType, weekIndex) {
            const viewersContainer = document.getElementById(`viewers-${weekIndex}`);
            const existingViewer = viewersContainer.querySelector(`[data-type="${docType}"]`);
            
            if (existingViewer) {
                viewersContainer.removeChild(existingViewer);
            } else {
                const docId = casDocuments[docType];
                const bookmarkId = weekData[weekIndex].bookmarks[docType];
                const viewer = document.createElement('iframe');
                viewer.className = 'document-viewer';
                viewer.src = `https://docs.google.com/document/d/${docId}/pub?embedded=true#${bookmarkId}`;
                viewer.dataset.type = docType;
                viewersContainer.appendChild(viewer);
            }

            updateButtonState(docType, weekIndex);
        }

        function toggleAllDocuments(weekIndex) {
            const types = Object.keys(casDocuments).filter(type => weekData[weekIndex].bookmarks[type]);
            const viewersContainer = document.getElementById(`viewers-${weekIndex}`);
            const showAllButton = document.querySelector(`.week-item:nth-child(${weekIndex + 1}) .show-all`);
            const allButtons = document.querySelectorAll(`.week-item:nth-child(${weekIndex + 1}) .cas-button:not(.show-all)`);

            if (viewersContainer.children.length === types.length) {
                viewersContainer.innerHTML = '';
                showAllButton.textContent = 'Show All';
                showAllButton.classList.remove('active');
                allButtons.forEach(button => button.classList.remove('active'));
            } else {
                types.forEach(type => {
                    if (!viewersContainer.querySelector(`[data-type="${type}"]`)) {
                        toggleDocument(type, weekIndex);
                    }
                });
                showAllButton.textContent = 'Hide All';
                showAllButton.classList.add('active');
                allButtons.forEach(button => button.classList.add('active'));
            }
        }

        function updateButtonState(docType, weekIndex) {
            const button = document.querySelector(`.week-item:nth-child(${weekIndex + 1}) .cas-button:not(.show-all)[onclick*="${docType}"]`);
            if (button) {
                button.classList.toggle('active');
            }
            updateShowAllButtonState(weekIndex);
        }

        function updateShowAllButtonState(weekIndex) {
            const viewersContainer = document.getElementById(`viewers-${weekIndex}`);
            const showAllButton = document.querySelector(`.week-item:nth-child(${weekIndex + 1}) .show-all`);
            const types = Object.keys(casDocuments).filter(type => weekData[weekIndex].bookmarks[type]);

            if (viewersContainer.children.length === types.length) {
                showAllButton.textContent = 'Hide All';
                showAllButton.classList.add('active');
            } else {
                showAllButton.textContent = 'Show All';
                showAllButton.classList.remove('active');
            }
        }

        createWeekStructure();
    </script>
</body>
</html>
