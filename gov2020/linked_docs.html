<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOV2020 Master Document</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 10px; /* Reduced padding */
            background-color: #f0f0f0;
        }

        .week-item {
            margin-bottom: 5px; /* Reduced margin */
            background-color: white;
            border-radius: 8px;
            padding: 8px; /* Reduced padding */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .week-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 3px; /* Reduced margin */
        }

        .week-title {
            font-weight: bold;
        }

        .cas-buttons {
            display: flex;
            gap: 5px;
            margin-left: auto;
        }

        .cas-button {
            padding: 3px 7px;
            border: 1px solid #ccc;
            background-color: #f8f9fa;
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.9em;
            white-space: nowrap;
        }

        .cas-button:hover {
            background-color: #e9ecef;
        }

        .cas-button.active {
            background-color: #007bff;
            color: white;
        }

        .document-viewers {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-areas: "course assignments section";
            gap: 10px;
            margin-top: 5px; /* Reduced margin */
        }

        .viewer-container {
            min-height: 0px;
        }

        #viewer-C {
            grid-area: course;
        }

        #viewer-A {
            grid-area: assignments;
        }

        #viewer-S {
            grid-area: section;
        }

        .document-viewer {
            width: 100%;
            height: 100%;
            border: none;
        }

        .viewer-container.active {
            display: block;
            height: 300px; /* Set height only when active */
            overflow: auto;
        }
    </style>
</head>
<body>
    <center><h1>GOV 2020: The Hidden Curriculum</h1><h3>Fall 2024</h3></center>
    <div id="weeklyStructure"></div>

    <script>
        const casDocuments = {
            C: "1heBKyy-nu6_WK4Uz4NFy4rriDQGSuaC3AhrIuZfqwVc",
            A: "1ffWPTNhPOIagU4VAxaKH2-FlKI7sJ1tNbAsoMxNyof4",
            S: "1oHBXw_rMKyRxaIOOK5qAyPnfYsvm6z_kIia91kfKr1U",
        };

        const casLabels = {
            C: "Course Notes",
            A: "Assignments",
            S: "Section Notes"
        };

        const weekData = [
            {
                title: "Logistics",
                bookmarks: {
                    C: "id.esns6bono4y1",
                    A: "id.3l2muz6xqtxv",
                    S: "id.47i8z9652mqy"
                }
            },
            {
                title: "Publication",
                bookmarks: {
                    C: "id.adpabqwv7zv7",
                    A: "id.oxnozjboaixo",
                    S: "id.s2zja9h32nyv"
                }
            },
            {
                title: "What's the Big Idea?",
                bookmarks: {
                    C: "id.ivc6kqodc3t1",
                    A: "id.qzb593mtzlc8",
                    S: "id.i2n4mamhd4ps"
                }
            },
            {
                title: "Getting (& presenting) defensible answers",
                bookmarks: {
                    C: "id.foj3yecpgns",
                    A: "id.vxoc8hxau355",
                    S: "id.oeiyxshoui8x"
                }
            },
            {
                title: "Research Strategy",
                bookmarks: {
                    C: "id.vtpopho3wx3u",
                    A: "id.k7jwxd5hrznc",
                    S: "id.asx9lztz7p1i"
                }
            },
            {
                title: "Changing the Question",
                bookmarks: {
                    C: "id.c17o4gf13ewq",
                    A: "id.qicytri2ahrh",
                    S: "id.umlfhl1nc674"
                }
            },
            {
                title: "The Big Picture",
                bookmarks: {
                    C: "id.jx3ve7u62f7h",
                    A: "id.tt30yz1iiuso",
                    S: "id.ddi2p3tky2eb"
                }
            },
            {
                title: "Graphics Impact Day",
                bookmarks: {
                    C: "id.189fmnj5obl4",
                    A: "id.tmgynyyr005l",
                    S: "id.prjj9a7mjikq"
                }
            },
            {
                title: "An Interlude for Science",
                bookmarks: {
                    C: "id.45i7iys9pmgk",
                    A: "id.tek1ara91kx",
                    S: "id.f4ao7enb97jf"
                }
            },
            {
                title: "The long view; whatâ€™s grad school all about?",
                bookmarks: {
                    C: "id.rjfzhl93mrbz",
                    A: "id.ry0exmrzy0an",
                    S: "id.r6zlmssoy2zx"
                }
            },
            {
                title: "Presentations: how to",
                bookmarks: {
                    C: "id.ftdde1vpxfn7",
                    A: "id.zdpz824z08vj",
                    S: "id.s2eg6z12z2az"
                }
            },
            {
                title: "Presentations",
                bookmarks: {
                    C: "id.pu6f7q1oddy4",
                    A: "id.db7ypagin2j"
                }
            },
            {
                title: "Final Help",
                bookmarks: {
                    C: "id.51x0dfbdv161",
                    A: "id.a3h0f4jb8xv9"
                }
            },
        ];

        function createWeekStructure() {
            const container = document.getElementById('weeklyStructure');
            weekData.forEach((week, index) => {
                const weekItem = document.createElement('div');
                weekItem.className = 'week-item';
                
                let buttons = '';
                let viewers = `
                    <div id="viewer-C-${index}" class="viewer-container"></div>
                    <div id="viewer-A-${index}" class="viewer-container"></div>
                    <div id="viewer-S-${index}" class="viewer-container"></div>
                `;

                for (const docType in casDocuments) {
                    if (week.bookmarks[docType]) {
                        buttons += `<button class="cas-button" onclick="toggleDocument('${docType}', ${index})">${casLabels[docType]}</button>`;
                    }
                }

                buttons += `<button class="cas-button show-all" onclick="toggleAllDocuments(${index})">Show All</button>`;

                const weekTitle = index === 0 ? week.title : `Week ${index}: ${week.title}`;

                weekItem.innerHTML = `
                    <div class="week-header">
                        <div class="week-title">${weekTitle}</div>
                        <div class="cas-buttons">
                            ${buttons}
                        </div>
                    </div>
                    <div class="document-viewers" id="viewers-${index}">
                        ${viewers}
                    </div>
                `;

                container.appendChild(weekItem);
            });
        }

        function toggleDocument(docType, weekIndex) {
            const viewerContainer = document.getElementById(`viewer-${docType}-${weekIndex}`);
            const existingViewer = viewerContainer.querySelector('iframe');
            
            if (existingViewer) {
                viewerContainer.removeChild(existingViewer);
                viewerContainer.style.minHeight = '0';
            } else {
                const docId = casDocuments[docType];
                const bookmarkId = weekData[weekIndex].bookmarks[docType];
                const viewer = document.createElement('iframe');
                viewer.className = 'document-viewer';
                viewer.src = `https://docs.google.com/document/d/${docId}/pub?embedded=true#${bookmarkId}`;
                viewerContainer.appendChild(viewer);
                viewerContainer.style.minHeight = '300px';
            }

            updateButtonState(docType, weekIndex);
        }

        function toggleAllDocuments(weekIndex) {
            const types = Object.keys(casDocuments).filter(type => weekData[weekIndex].bookmarks[type]);
            const showAllButton = document.querySelector(`.week-item:nth-child(${weekIndex + 1}) .show-all`);
            const viewerContainers = types.map(type => document.getElementById(`viewer-${type}-${weekIndex}`));

            const allViewersActive = viewerContainers.every(viewerContainer =>
                viewerContainer.children.length > 0
            );

            if (allViewersActive) {
                viewerContainers.forEach(viewerContainer => {
                    viewerContainer.innerHTML = '';
                    viewerContainer.style.minHeight = '0';
                });
                showAllButton.textContent = 'Show All';
                showAllButton.classList.remove('active');
            } else {
                types.forEach(type => {
                    const viewerContainer = document.getElementById(`viewer-${type}-${weekIndex}`);
                    if (viewerContainer.children.length === 0) {
                        toggleDocument(type, weekIndex);
                    }
                });
            }

            updateButtonState(null, weekIndex, true);
        }

        function updateButtonState(docType, weekIndex, all = false) {
            const buttons = document.querySelectorAll(`.week-item:nth-child(${weekIndex + 1}) .cas-button`);
            const showAllButton = document.querySelector(`.week-item:nth-child(${weekIndex + 1}) .show-all`);
            const viewerContainers = {
                C: document.getElementById(`viewer-C-${weekIndex}`),
                A: document.getElementById(`viewer-A-${weekIndex}`),
                S: document.getElementById(`viewer-S-${weekIndex}`)
            };

            if (all) {
                Object.keys(viewerContainers).forEach(type => {
                    const button = Array.from(buttons).find(button => button.textContent === casLabels[type]);
                    if (viewerContainers[type].children.length > 0) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                });
            } else {
                if (docType) {
                    const button = Array.from(buttons).find(button => button.textContent === casLabels[docType]);
                    if (viewerContainers[docType].children.length > 0) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                }
            }

            if (Object.values(viewerContainers).every(container => container.children.length > 0)) {
                showAllButton.textContent = 'Hide All';
                showAllButton.classList.add('active');
            } else {
                showAllButton.textContent = 'Show All';
                showAllButton.classList.remove('active');
            }
        }

        createWeekStructure();
    </script>
</body>
</html>